<div class="container mt-3">
  <div class="row">
    <div class="col-12 col-lg-10 mx-auto">
      <div class="card">
        <div class="card-header bg-primary text-white">
          <h5 class="m-0">‚öîÔ∏è {{ $t('character.form.title') }}</h5>
        </div>
        <div class="card-body">
          <form @submit.prevent="onSubmit" novalidate>
            <div class="row">
              <div class="col-12 mb-3">
                <label class="form-label" for="name">{{ $t('character.form.name') }}</label>
                <input
                  id="name"
                  type="text"
                  class="form-control"
                  v-model.trim="form.name"
                  @input="formDirty.name = true"
                  :class="{ 'is-invalid': errorName.mostrar, 'is-valid': formDirty.name && errorName.ok }"
                  :placeholder="$t('character.form.placeholders.name')"
                />
                <div class="invalid-feedback" v-if="errorName.mostrar">{{ errorName.mensaje }}</div>
              </div>
            </div>

            <div class="row">
              <div class="col-12 col-md-6 mb-3">
                <label class="form-label" for="race">{{ $t('character.form.race') }}</label>
                <select
                  id="race"
                  class="form-control"
                  v-model="form.race"
                  @change="formDirty.race = true"
                  :class="{ 'is-invalid': errorRace.mostrar, 'is-valid': formDirty.race && errorRace.ok }"
                >
                  <option value="">{{ $t('character.form.placeholders.selectRace') }}</option>
                  <option v-for="raza in razas" :key="raza" :value="raza">{{ raza }}</option>
                </select>
                <div class="invalid-feedback" v-if="errorRace.mostrar">{{ errorRace.mensaje }}</div>
              </div>
            </div>

            <AvatarSelector
              v-if="form.race"
              :avatars="avataresDisponibles"
              :selected="form.avatar"
              :race="form.race"
              :show-error="errorAvatar.mostrar"
              :error-message="errorAvatar.mensaje"
              :is-valid="formDirty.avatar && errorAvatar.ok"
              @select-avatar="seleccionarAvatar"
            />

            <div class="row">
              <div class="col-12 col-md-6 mb-3">
                <label class="form-label" for="class">{{ $t('character.form.class') }}</label>
                <select
                  id="class"
                  class="form-control"
                  v-model="form.class"
                  @change="formDirty.class = true"
                  :class="{ 'is-invalid': errorClass.mostrar, 'is-valid': formDirty.class && errorClass.ok }"
                >
                  <option value="">{{ $t('character.form.placeholders.selectClass') }}</option>
                  <option v-for="clase in clases" :key="clase" :value="clase">{{ clase }}</option>
                </select>
                <div class="invalid-feedback" v-if="errorClass.mostrar">
                  {{ errorClass.mensaje }}
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-12 col-md-6 mb-3">
                <label class="form-label" for="guild">{{ $t('character.form.guild') }}</label>
                <select
                  id="guild"
                  class="form-control"
                  v-model="form.guild"
                  @change="formDirty.guild = true"
                  :class="{ 'is-invalid': errorGuild.mostrar, 'is-valid': formDirty.guild && errorGuild.ok }"
                >
                  <option value="">{{ $t('character.form.placeholders.selectGuild') }}</option>
                  <option v-for="gremio in gremios" :key="gremio" :value="gremio">
                    {{ gremio }}
                  </option>
                </select>
                <div class="invalid-feedback" v-if="errorGuild.mostrar">
                  {{ errorGuild.mensaje }}
                </div>
              </div>

              <div class="col-12 col-md-6 mb-3">
                <label class="form-label" for="kingdom">{{ $t('character.form.kingdom') }}</label>
                <select
                  id="kingdom"
                  class="form-control"
                  v-model="form.kingdom"
                  @change="formDirty.kingdom = true"
                  :class="{ 'is-invalid': errorKingdom.mostrar, 'is-valid': formDirty.kingdom && errorKingdom.ok }"
                >
                  <option value="">{{ $t('character.form.placeholders.selectKingdom') }}</option>
                  <option v-for="reino in reinos" :key="reino" :value="reino">{{ reino }}</option>
                </select>
                <div class="invalid-feedback" v-if="errorKingdom.mostrar">
                  {{ errorKingdom.mensaje }}
                </div>
              </div>
            </div>

            <div
              class="alert alert-info mt-3"
              style="background: rgba(212, 175, 55, 0.1); border: 1px solid #d4af37; color: #d4af37"
            >
              <small>
                <strong>‚ÑπÔ∏è {{ $t('character.form.note.title') }}:</strong> {{ $t('character.form.note.description') }}
              </small>
            </div>

            <div class="d-grid gap-2 d-md-flex justify-content-md-end mt-4">
              <button class="btn btn-primary" type="submit" :disabled="!isValid || enviando">
                <span v-if="enviando">‚è≥ {{ $t('character.form.creating') }}...</span>
                <span v-else">‚ú® {{ $t('character.form.createCharacter') }}</span>
              </button>
              <button
                class="btn btn-secondary"
                type="button"
                @click="resetForm"
                :disabled="enviando"
              >
                üóëÔ∏è {{ $t('character.form.clear') }}
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
